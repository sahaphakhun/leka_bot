<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เลขาบอท - Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/dashboard/assets/styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>กำลังโหลด Dashboard...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <h1 class="logo">
                    <i class="fas fa-robot"></i>
                    เลขาบอท
                </h1>
                <div class="group-selector">
                    <i class="fas fa-users"></i>
                    <span id="currentGroupName">กลุ่มทดสอบ</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
            <div class="header-right">
                <button class="btn-icon" id="notificationBtn" title="การแจ้งเตือน">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                <div class="user-menu">
                    <img src="https://via.placeholder.com/32" alt="User" class="user-avatar" id="userAvatar">
                    <div class="user-info">
                        <span class="user-name" id="userName">ผู้ใช้ไม่ทราบชื่อ</span>
                        <span class="user-role">สมาชิก</span>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" data-view="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>ภาพรวม</span>
                </a>
                <a href="#calendar" class="nav-item" data-view="calendar">
                    <i class="fas fa-calendar-alt"></i>
                    <span>ปฏิทิน</span>
                </a>
                <a href="#tasks" class="nav-item" data-view="tasks">
                    <i class="fas fa-tasks"></i>
                    <span>งานทั้งหมด</span>
                </a>
                <a href="#files" class="nav-item" data-view="files">
                    <i class="fas fa-folder"></i>
                    <span>คลังไฟล์</span>
                </a>
                <a href="#leaderboard" class="nav-item" data-view="leaderboard">
                    <i class="fas fa-trophy"></i>
                    <span>อันดับ</span>
                </a>
                <a href="#reports" class="nav-item" data-view="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>รายงาน</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <button class="btn btn-primary btn-full" id="addTaskBtn">
                    <i class="fas fa-plus"></i>
                    เพิ่มงานใหม่
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboardView" class="view active">
                <div class="view-header">
                    <h2>ภาพรวมกลุ่ม</h2>
                    <div class="view-actions">
                        <button class="btn btn-outline" id="refreshBtn">
                            <i class="fas fa-sync"></i>
                            รีเฟรช
                        </button>
                        <button class="btn btn-outline" id="exportBtn">
                            <i class="fas fa-download"></i>
                            ส่งออก
                        </button>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon bg-blue">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalTasks">0</div>
                            <div class="stat-label">งานทั้งหมด</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bg-orange">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="pendingTasks">0</div>
                            <div class="stat-label">รอดำเนินการ</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bg-green">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="completedTasks">0</div>
                            <div class="stat-label">เสร็จแล้ว</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bg-red">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="overdueTasks">0</div>
                            <div class="stat-label">เกินกำหนด</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Calendar & Task Overview -->
                <div class="dashboard-grid">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h3>งานใกล้ครบกำหนด</h3>
                            <a href="#tasks" class="section-link">ดูทั้งหมด <i class="fas fa-arrow-right"></i></a>
                        </div>
                        <div class="upcoming-tasks" id="upcomingTasks">
                            <!-- จะใส่ด้วย JavaScript -->
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="section-header">
                            <h3>อันดับประจำสัปดาห์</h3>
                            <a href="#leaderboard" class="section-link">ดูทั้งหมด <i class="fas fa-arrow-right"></i></a>
                        </div>
                        <div class="mini-leaderboard" id="miniLeaderboard">
                            <!-- จะใส่ด้วย JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar View -->
            <div id="calendarView" class="view">
                <div class="view-header">
                    <h2>ปฏิทินงาน</h2>
                    <div class="view-actions">
                        <div class="btn-group">
                            <button class="btn btn-outline active" data-view-mode="month">เดือน</button>
                            <button class="btn btn-outline" data-view-mode="week">สัปดาห์</button>
                            <button class="btn btn-outline" data-view-mode="day">วัน</button>
                        </div>
                    </div>
                </div>

                <div class="calendar-container">
                    <div class="calendar-header">
                        <button class="btn-icon" id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                        <h3 id="currentMonth">มกราคม 2024</h3>
                        <button class="btn-icon" id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- จะใส่ด้วย JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Tasks View -->
            <div id="tasksView" class="view">
                <div class="view-header">
                    <h2>งานทั้งหมด</h2>
                    <div class="view-actions">
                        <div class="filters">
                            <select class="filter-select" id="statusFilter">
                                <option value="">สถานะทั้งหมด</option>
                                <option value="pending">รอดำเนินการ</option>
                                <option value="in_progress">กำลังดำเนินการ</option>
                                <option value="completed">เสร็จแล้ว</option>
                                <option value="overdue">เกินกำหนด</option>
                            </select>
                            <select class="filter-select" id="assigneeFilter">
                                <option value="">ผู้รับผิดชอบทั้งหมด</option>
                            </select>
                            <input type="text" class="filter-input" id="searchTasks" placeholder="ค้นหางาน...">
                        </div>
                    </div>
                </div>

                <div class="tasks-container">
                    <div class="tasks-list" id="tasksList">
                        <!-- จะใส่ด้วย JavaScript -->
                    </div>
                    <div class="pagination" id="tasksPagination">
                        <!-- จะใส่ด้วย JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Files View -->
            <div id="filesView" class="view">
                <div class="view-header">
                    <h2>คลังไฟล์</h2>
                    <div class="view-actions">
                        <input type="text" class="filter-input" id="searchFiles" placeholder="ค้นหาไฟล์...">
                        <button class="btn btn-primary" id="uploadFileBtn">
                            <i class="fas fa-upload"></i>
                            อัปโหลด
                        </button>
                    </div>
                </div>

                <div class="files-container">
                    <div class="files-grid" id="filesGrid">
                        <!-- จะใส่ด้วย JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Leaderboard View -->
            <div id="leaderboardView" class="view">
                <div class="view-header">
                    <h2>อันดับผลงาน</h2>
                    <div class="view-actions">
                        <div class="btn-group">
                            <button class="btn btn-outline active" data-period="weekly">รายสัปดาห์</button>
                            <button class="btn btn-outline" data-period="monthly">รายเดือน</button>
                        </div>
                    </div>
                </div>

                <div class="leaderboard-container">
                    <div class="leaderboard-list" id="leaderboardList">
                        <!-- จะใส่ด้วย JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Reports View -->
            <div id="reportsView" class="view">
                <div class="view-header">
                    <h2>รายงาน</h2>
                </div>

                <div class="reports-container">
                    <div class="report-cards">
                        <div class="report-card">
                            <h3>รายงานงานค้าง</h3>
                            <p>งานที่เกินกำหนดและยังไม่เสร็จ</p>
                            <button class="btn btn-outline">ดาวน์โหลด CSV</button>
                        </div>
                        <div class="report-card">
                            <h3>รายงานผลงาน</h3>
                            <p>สรุปผลงานรายบุคคลและกลุ่ม</p>
                            <button class="btn btn-outline">ดาวน์โหลด Excel</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Task Detail Modal -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="taskModalTitle">รายละเอียดงาน</h3>
                <button class="modal-close" id="taskModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="taskModalBody">
                <!-- จะใส่ด้วย JavaScript -->
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="addTaskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>เพิ่มงานใหม่</h3>
                <button class="modal-close" id="addTaskModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addTaskForm">
                    <div class="form-group">
                        <label for="taskTitle">ชื่องาน *</label>
                        <input type="text" id="taskTitle" name="title" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">รายละเอียด</label>
                        <textarea id="taskDescription" name="description" rows="3"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="taskDueDate">วันที่ครบกำหนด *</label>
                            <input type="datetime-local" id="taskDueDate" name="dueDate" required>
                        </div>
                        <div class="form-group">
                            <label for="taskPriority">ระดับความสำคัญ</label>
                            <select id="taskPriority" name="priority">
                                <option value="low">ต่ำ</option>
                                <option value="medium" selected>ปานกลาง</option>
                                <option value="high">สูง</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="taskAssignees">ผู้รับผิดชอบ</label>
                        <select id="taskAssignees" name="assignees" multiple>
                            <!-- จะใส่ด้วย JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskTags">แท็ก (คั่นด้วยจุลภาค)</label>
                        <input type="text" id="taskTags" name="tags" placeholder="การเงิน, ประชุม, ด่วน">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" id="cancelAddTask">ยกเลิก</button>
                        <button type="submit" class="btn btn-primary">เพิ่มงาน</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container">
        <!-- จะใส่ด้วย JavaScript -->
    </div>

    <script src="/dashboard/assets/script.js"></script>
</body>
</html>