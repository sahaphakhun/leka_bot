<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Moment.js</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        .debug { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Debug Moment.js</h1>
    <div id="output"></div>

    <script src="assets/js/moment.min.js"></script>
    <script src="assets/js/moment-timezone.min.js"></script>
    
    <script>
        var output = document.getElementById('output');
        
        function log(message, type = 'info') {
            var className = type === 'success' ? 'success' : type === 'error' ? 'error' : 'info';
            output.innerHTML += '<p class="' + className + '">' + message + '</p>';
        }
        
        function debugObject(obj, name) {
            output.innerHTML += '<div class="debug"><strong>' + name + ':</strong><br>';
            for (var key in obj) {
                if (obj.hasOwnProperty(key)) {
                    output.innerHTML += key + ': ' + typeof obj[key] + ' = ' + obj[key] + '<br>';
                }
            }
            output.innerHTML += '</div>';
        }
        
        try {
            log('üîç ‡πÄ‡∏£‡∏¥‡πà‡∏° Debug Moment.js...');
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö moment function
            log('1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö moment function');
            if (typeof moment === 'function') {
                log('‚úÖ moment ‡πÄ‡∏õ‡πá‡∏ô function', 'success');
                log('moment.length: ' + moment.length);
            } else {
                log('‚ùå moment ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà function', 'error');
                log('typeof moment: ' + typeof moment);
            }
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö moment object
            log('2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö moment object');
            if (moment) {
                log('‚úÖ moment object ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà', 'success');
                debugObject(moment, 'moment object');
            } else {
                log('‚ùå moment object ‡πÑ‡∏°‡πà‡∏°‡∏µ', 'error');
            }
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö moment.fn
            log('3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö moment.fn (prototype)');
            if (moment.fn) {
                log('‚úÖ moment.fn ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà', 'success');
                debugObject(moment.fn, 'moment.fn');
            } else {
                log('‚ùå moment.fn ‡πÑ‡∏°‡πà‡∏°‡∏µ', 'error');
            }
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö moment.tz
            log('4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö moment.tz');
            if (moment.tz) {
                log('‚úÖ moment.tz ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà', 'success');
                debugObject(moment.tz, 'moment.tz');
            } else {
                log('‚ùå moment.tz ‡πÑ‡∏°‡πà‡∏°‡∏µ', 'error');
            }
            
            // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á moment instance
            log('5. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á moment instance');
            try {
                var now = moment();
                log('‚úÖ moment() ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ: ' + now, 'success');
                log('typeof now: ' + typeof now);
                log('now.constructor: ' + now.constructor.name);
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö prototype ‡∏Ç‡∏≠‡∏á instance
                if (now.__proto__) {
                    log('‚úÖ __proto__ ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà', 'success');
                    debugObject(now.__proto__, 'instance __proto__');
                } else {
                    log('‚ùå __proto__ ‡πÑ‡∏°‡πà‡∏°‡∏µ', 'error');
                }
                
            } catch (e) {
                log('‚ùå moment() ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: ' + e.message, 'error');
            }
            
            // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö tz method
            log('6. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö tz method');
            try {
                var testDate = moment('2024-01-01 12:00:00');
                log('‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á testDate: ' + testDate, 'success');
                
                if (typeof testDate.tz === 'function') {
                    log('‚úÖ testDate.tz ‡πÄ‡∏õ‡πá‡∏ô function', 'success');
                    var bangkokDate = testDate.tz('Asia/Bangkok');
                    log('‚úÖ tz() ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ: ' + bangkokDate, 'success');
                } else {
                    log('‚ùå testDate.tz ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà function', 'error');
                    log('typeof testDate.tz: ' + typeof testDate.tz);
                }
                
            } catch (e) {
                log('‚ùå tz method ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: ' + e.message, 'error');
            }
            
            log('üéâ ‡∏Å‡∏≤‡∏£ Debug ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!', 'success');
            
        } catch (error) {
            log('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message, 'error');
            console.error('Error:', error);
        }
    </script>
</body>
</html>
