const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dim9Tgo2.js","assets/index-DpFSsidZ.css"])))=>i.map(i=>d[i]);
import{c as g,r as a,j as e,B as d,v as V,D as E,u as Y,_ as H,ah as W,ai as G,aj as J,ak as Q,q as ee,t as se,am as L}from"./index-Dim9Tgo2.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=g("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=g("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=g("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=g("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=g("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=g("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ce=({url:w,fileName:j,onClose:s})=>{const[r,m]=a.useState(1),[C,c]=a.useState(0),[z,M]=a.useState(1),[F,P]=a.useState(1),[u,D]=a.useState(!1),[x,N]=a.useState(!1),[f,b]=a.useState({x:0,y:0}),[n,i]=a.useState({x:0,y:0}),[y,h]=a.useState(!0),o=a.useRef(null),S=a.useRef(null),p=.5,v=3,k=.1,R=()=>{m(t=>Math.min(t+k,v))},T=()=>{m(t=>Math.max(t-k,p))},_=()=>{m(1),b({x:0,y:0}),c(0)},K=()=>{c(t=>(t+90)%360)},q=()=>{o.current&&(u?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():o.current.requestFullscreen?o.current.requestFullscreen():o.current.webkitRequestFullscreen?o.current.webkitRequestFullscreen():o.current.msRequestFullscreen&&o.current.msRequestFullscreen())};a.useEffect(()=>{const t=()=>{D(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("msfullscreenchange",t),()=>{document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("msfullscreenchange",t)}},[]);const I=t=>{if(t.ctrlKey||t.metaKey){t.preventDefault();const l=t.deltaY>0?-k:k;m(X=>Math.max(p,Math.min(v,X+l)))}},O=t=>{r>1&&(N(!0),i({x:t.clientX-f.x,y:t.clientY-f.y}),t.preventDefault())},A=t=>{x&&b({x:t.clientX-n.x,y:t.clientY-n.y})},B=()=>{N(!1)},Z=()=>{const t=document.createElement("a");t.href=w,t.download=j||"document.pdf",document.body.appendChild(t),t.click(),document.body.removeChild(t)};a.useEffect(()=>{const t=l=>{(l.ctrlKey||l.metaKey)&&l.key==="+"?(l.preventDefault(),R()):(l.ctrlKey||l.metaKey)&&l.key==="-"?(l.preventDefault(),T()):(l.ctrlKey||l.metaKey)&&l.key==="0"?(l.preventDefault(),_()):l.key==="r"||l.key==="R"?K():l.key==="f"||l.key==="F"?q():l.key==="Escape"&&!u&&s&&s()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[u]);const U=()=>{h(!1)},$=Math.round(r*100);return e.jsxs("div",{ref:o,className:`relative bg-gray-900 ${u?"w-screen h-screen":"w-full h-full"}`,onWheel:I,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gray-800/95 backdrop-blur-sm border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:T,disabled:r<=p,className:"text-white hover:bg-gray-700",title:"ซูมออก (Ctrl+-)",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsxs("div",{className:"px-3 py-1 bg-gray-700 rounded text-white text-sm min-w-[60px] text-center",children:[$,"%"]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:R,disabled:r>=v,className:"text-white hover:bg-gray-700",title:"ซูมเข้า (Ctrl++)",children:e.jsx(re,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-600 mx-1"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:_,className:"text-white hover:bg-gray-700",title:"รีเซ็ต (Ctrl+0)",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:K,className:"text-white hover:bg-gray-700",title:"หมุน 90° (R)",children:e.jsx(ae,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 text-center px-4",children:e.jsx("p",{className:"text-white text-sm font-medium truncate",children:j||"PDF Document"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:q,className:"text-white hover:bg-gray-700",title:"เต็มหน้าจอ (F)",children:u?e.jsx(ne,{className:"w-4 h-4"}):e.jsx(te,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:Z,className:"text-white hover:bg-gray-700",title:"ดาวน์โหลด",children:e.jsx(E,{className:"w-4 h-4"})})]})]})}),y&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 z-40",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-white",children:"กำลังโหลด PDF..."})]})}),e.jsx("div",{className:`flex items-center justify-center overflow-hidden ${u?"h-screen":"h-full"}`,style:{paddingTop:"60px",cursor:x?"grabbing":r>1?"grab":"default"},onMouseDown:O,onMouseMove:A,onMouseUp:B,onMouseLeave:B,children:e.jsx("div",{style:{transform:`translate(${f.x}px, ${f.y}px) scale(${r}) rotate(${C}deg)`,transformOrigin:"center center",transition:x?"none":"transform 0.2s ease-out",width:"100%",height:"calc(100% - 60px)",pointerEvents:x?"none":"auto"},children:e.jsx("iframe",{ref:S,src:w,className:"w-full h-full border-0 bg-white",title:"PDF Preview",onLoad:U})})}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-gray-800/95 backdrop-blur-sm text-white text-xs p-3 rounded-lg border border-gray-700 opacity-0 hover:opacity-100 transition-opacity",children:[e.jsx("p",{className:"font-semibold mb-2",children:"คีย์ลัด:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"Ctrl/Cmd + Plus: ซูมเข้า"}),e.jsx("li",{children:"Ctrl/Cmd + Minus: ซูมออก"}),e.jsx("li",{children:"Ctrl/Cmd + 0: รีเซ็ต"}),e.jsx("li",{children:"R: หมุน"}),e.jsx("li",{children:"F: เต็มหน้าจอ"}),e.jsx("li",{children:"Scroll + Ctrl: ซูม"}),e.jsx("li",{children:"Drag: เลื่อนภาพ (เมื่อซูม)"})]})]})]})};function de(){const{isFilePreviewOpen:w,closeFilePreview:j,selectedFile:s}=Y(),[r,m]=a.useState(null),[C,c]=a.useState(null),[z,M]=a.useState(!0),[F,P]=a.useState(null);a.useEffect(()=>{s&&(u(),D())},[s]);const u=()=>{if(!s)return;const i=(s.name||s.fileName||"").split(".").pop().toLowerCase(),y=["jpg","jpeg","png","gif","webp","svg","bmp"],h=["mp4","webm","ogg","mov","avi"],o=["mp3","wav","ogg","m4a"],S=["pdf"],p=["txt","md","json","xml","csv"],v=["doc","docx","xls","xlsx","ppt","pptx"];y.includes(i)?c("image"):h.includes(i)?c("video"):o.includes(i)?c("audio"):S.includes(i)?c("pdf"):p.includes(i)?c("text"):v.includes(i)?c("document"):c("unknown")},D=async()=>{M(!0),P(null);try{if(s.url)m(s.url);else if(s instanceof File){const n=URL.createObjectURL(s);m(n)}else if(s.id){const{getFilePreview:n}=await H(async()=>{const{getFilePreview:y}=await import("./index-Dim9Tgo2.js").then(h=>h.aX);return{getFilePreview:y}},__vite__mapDeps([0,1])),i=await n(s.id);m(i)}}catch(n){console.error("Failed to load preview:",n),P("ไม่สามารถโหลดตัวอย่างไฟล์ได้")}finally{M(!1)}},x=async()=>{if(s)try{const n=document.createElement("a");n.href=r||s.url,n.download=s.name||s.fileName||"download",document.body.appendChild(n),n.click(),document.body.removeChild(n),ee("เริ่มดาวน์โหลดไฟล์")}catch(n){console.error("Failed to download file:",n),se("ไม่สามารถดาวน์โหลดไฟล์ได้",n)}},N=()=>{if(z)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"กำลังโหลด..."})]})});if(F)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(L,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:F})]})});switch(C){case"image":return e.jsx("div",{className:"flex items-center justify-center bg-gray-50 rounded-lg p-4",children:e.jsx("img",{src:r,alt:s.name,className:"max-w-full max-h-[70vh] object-contain"})});case"video":return e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("video",{src:r,controls:!0,className:"w-full max-h-[70vh]",children:"เบราว์เซอร์ของคุณไม่รองรับการเล่นวิดีโอ"})});case"audio":return e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-gray-50 rounded-lg p-4",children:[e.jsx(le,{className:"w-24 h-24 mb-6 text-gray-400"}),e.jsx("audio",{src:r,controls:!0,className:"w-full max-w-md",children:"เบราว์เซอร์ของคุณไม่รองรับการเล่นเสียง"})]});case"pdf":return e.jsx("div",{className:"bg-gray-900 rounded-lg overflow-hidden",style:{height:"70vh"},children:e.jsx(ce,{url:r,fileName:s.name||s.fileName,onClose:j})});case"text":return e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("iframe",{src:r,className:"w-full h-[70vh] border-0",title:"Text Preview"})});case"document":return e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-gray-50 rounded-lg p-4",children:[e.jsx(L,{className:"w-24 h-24 mb-6 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"ไฟล์เอกสาร - คลิกดาวน์โหลดเพื่อเปิดด้วยโปรแกรมที่เหมาะสม"}),e.jsxs(d,{onClick:x,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"ดาวน์โหลด"]})]});default:return e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-gray-50 rounded-lg p-4",children:[e.jsx(L,{className:"w-24 h-24 mb-6 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"ไม่สามารถแสดงตัวอย่างไฟล์ประเภทนี้ได้"}),e.jsxs(d,{onClick:x,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"ดาวน์โหลด"]})]})}},f=n=>{if(!n)return"-";if(n===0)return"0 Bytes";const i=1024,y=["Bytes","KB","MB","GB"],h=Math.floor(Math.log(n)/Math.log(i));return Math.round(n/Math.pow(i,h)*100)/100+" "+y[h]},b=n=>{n||j()};return e.jsx(W,{open:w,onOpenChange:b,children:e.jsxs(G,{className:"max-w-5xl max-h-[95vh] overflow-y-auto",children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[e.jsx("p",{className:"truncate",children:(s==null?void 0:s.name)||(s==null?void 0:s.fileName)}),(s==null?void 0:s.size)&&e.jsx("p",{className:"text-sm text-muted-foreground font-normal",children:f(s.size)})]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:x,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"ดาวน์โหลด"]})]})}),e.jsx("div",{className:"mt-4",children:N()}),s&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-2 text-sm",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"ชื่อไฟล์"}),e.jsx("p",{className:"font-medium",children:s.name||s.fileName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"ขนาด"}),e.jsx("p",{className:"font-medium",children:f(s.size)})]}),s.uploadedBy&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"อัปโหลดโดย"}),e.jsx("p",{className:"font-medium",children:s.uploadedBy})]}),s.uploadedAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"วันที่อัปโหลด"}),e.jsx("p",{className:"font-medium",children:new Date(s.uploadedAt).toLocaleDateString("th-TH")})]})]})})]})})}export{de as default};
