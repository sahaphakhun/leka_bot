import{c as S,aB as ye,r as h,j as e,aC as me,aD as he,B as g,aE as pe,aF as ge,aG as B,aH as E,ay as Ne,m as we,aI as ke,v as Ce,D as Se,am as K,an as Te,k as Re,a5 as D,a6 as _,ao as ee,ap as se,ar as Le,S as Me,I as Fe,a7 as te,a8 as ae,a9 as re,x as U,b as Ee,d as Oe,aJ as Ae,q as V,t as F}from"./index-BqkKSn_R.js";import{E as le}from"./eye-YFUh22jr.js";import{C as Ie}from"./copy-CdObEvye.js";import{T as Pe}from"./trending-up-DdZgTMoo.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=S("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=S("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=S("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=S("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=S("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=S("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=S("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);var z={exports:{}},$,oe;function $e(){if(oe)return $;oe=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return $=r,$}var J,ie;function Je(){if(ie)return J;ie=1;var r=$e();function t(){}function n(){}return n.resetWarningCache=t,J=function(){function a(m,i,y,c,p,u){if(u!==r){var O=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw O.name="Invariant Violation",O}}a.isRequired=a;function l(){return a}var o={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:l,element:a,elementType:a,instanceOf:l,node:a,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},J}var ce;function Be(){return ce||(ce=1,z.exports=Je()()),z.exports}var We=Be();const w=ye(We),ue=({columns:r=[],onChange:t,storageKey:n=null,className:a=""})=>{const l=c=>{const p=r.map(u=>u.key===c?{...u,visible:!u.visible}:u);if(t(p),n)try{localStorage.setItem(n,JSON.stringify(p))}catch(u){console.warn("Failed to save column visibility:",u)}},o=()=>{const c=r.map(p=>({...p,visible:!0}));if(t(c),n)try{localStorage.setItem(n,JSON.stringify(c))}catch(p){console.warn("Failed to save column visibility:",p)}},m=()=>{const c=r.map((p,u)=>({...p,visible:u===0}));if(t(c),n)try{localStorage.setItem(n,JSON.stringify(c))}catch(p){console.warn("Failed to save column visibility:",p)}},i=r.filter(c=>c.visible).length,y=i===r.length;return e.jsxs(me,{children:[e.jsx(he,{asChild:!0,children:e.jsxs(g,{variant:"outline",size:"sm",className:a,children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå (",i,"/",r.length,")"]})}),e.jsxs(pe,{align:"end",className:"w-56",children:[e.jsx(ge,{children:"‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå"}),e.jsx(B,{}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:r.map(c=>e.jsx(E,{onClick:p=>{p.preventDefault(),l(c.key)},className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx(Ne,{checked:c.visible,onCheckedChange:()=>l(c.key),className:"mr-2",onClick:p=>p.stopPropagation()}),e.jsx("span",{className:"flex-1",children:c.label}),c.visible?e.jsx(le,{className:"w-4 h-4 text-green-600"}):e.jsx(ne,{className:"w-4 h-4 text-gray-400"})]})},c.key))}),e.jsx(B,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 p-1",children:[e.jsxs(g,{variant:"ghost",size:"sm",onClick:o,disabled:y,className:"text-xs",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),"‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"]}),e.jsxs(g,{variant:"ghost",size:"sm",onClick:m,disabled:i<=1,className:"text-xs",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),"‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"]})]})]})]})};ue.propTypes={columns:w.arrayOf(w.shape({key:w.string.isRequired,label:w.string.isRequired,visible:w.bool.isRequired})).isRequired,onChange:w.func.isRequired,storageKey:w.string,className:w.string};const He=(r,t)=>{const[n,a]=h.useState(()=>{try{const l=localStorage.getItem(t);if(l){const o=JSON.parse(l);return r.map(m=>{const i=o.find(y=>y.key===m.key);return i?{...m,visible:i.visible}:m})}}catch(l){console.warn("Failed to load column visibility:",l)}return r});return[n,a]},b=(r,t)=>{const n=r.find(a=>a.key===t);return(n==null?void 0:n.visible)??!1},W=(r,t)=>{if(!r||r.length===0)return"";const n=t.map(o=>o.label).join(","),a=t.map(o=>o.key),l=r.map(o=>a.map(m=>{let i=o[m];return i==null?i="":typeof i=="object"?i=JSON.stringify(i):i=String(i),(i.includes(",")||i.includes('"')||i.includes(`
`))&&(i=`"${i.replace(/"/g,'""')}"`),i}).join(","));return[n,...l].join(`
`)},Qe=(r,t="export.csv")=>{const n=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),l=URL.createObjectURL(n);a.setAttribute("href",l),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},Ge=(r,t="export.json")=>{const n=JSON.stringify(r,null,2),a=new Blob([n],{type:"application/json;charset=utf-8;"}),l=document.createElement("a"),o=URL.createObjectURL(a);l.setAttribute("href",o),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},Ye=(r,t,n="export.xlsx")=>{const a=W(r,t),l=new Blob(["\uFEFF"+a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=document.createElement("a"),m=URL.createObjectURL(l);o.setAttribute("href",m),o.setAttribute("download",n),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(m)},Xe=(r,t)=>{const a=new Date().toISOString().slice(0,19).replace(/:/g,"-");return`${r}_${a}.${t}`},Ze=(r,t,n="csv")=>{const a=t.filter(o=>o.visible),l=Xe("leaderboard",n);switch(n){case"csv":const o=W(r,a);Qe(o,l);break;case"excel":Ye(r,a,l);break;case"json":const m=r.map(i=>{const y={};return a.forEach(c=>{y[c.key]=i[c.key]}),y});Ge(m,l);break;default:throw new Error(`Unsupported export format: ${n}`)}},Ke=async(r,t)=>{const n=t.filter(l=>l.visible),a=W(r,n);try{return await navigator.clipboard.writeText(a),!0}catch(l){return console.error("Failed to copy to clipboard:",l),!1}},es=[{value:"weekly",label:"‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"},{value:"monthly",label:"‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"},{value:"quarterly",label:"‡∏£‡∏≤‡∏¢‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™"},{value:"yearly",label:"‡∏£‡∏≤‡∏¢‡∏õ‡∏µ"}],ss=(r=[])=>Array.isArray(r)?r.map((t,n)=>{const a=t.displayName||t.name||t.realName||t.nickName||"‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ä‡∏∑‡πà‡∏≠",l=Number(t.totalScore??t.weeklyPoints??t.monthlyPoints??t.points??t.score??0),o=Number(t.completedTasks??t.tasksCompleted??t.totalCompleted??t.totalTasks??0),m=t.onTimeRate??t.onTimePercentage??t.punctuality??t.onTime??0,i=Number.isFinite(m)?Math.round(m):0;return{id:t.lineUserId||t.userId||t.id||`rank-${n}`,rank:t.rank||n+1,name:a,pictureUrl:t.pictureUrl||t.avatar,score:l,completed:o,onTimeRate:i,role:t.role||"member",streak:t.streak||t.currentStreak||0,bestStreak:t.bestStreak||0}}):[],de=["ü•á","ü•à","ü•â"],ts=[{key:"rank",label:"‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö",visible:!0},{key:"name",label:"‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",visible:!0},{key:"score",label:"‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°",visible:!0},{key:"completed",label:"‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à",visible:!0},{key:"onTimeRate",label:"‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤",visible:!0},{key:"stats",label:"‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏î‡πà‡∏ô",visible:!0}];function os(){const{groupId:r}=we(),[t,n]=h.useState("weekly"),[a,l]=h.useState([]),[o,m]=h.useState(!0),[i,y]=h.useState(!1),[c,p]=h.useState(null),[u,O]=h.useState(""),[T,xe]=h.useState("rank"),[R,H]=h.useState("asc"),[j,A]=h.useState(1),[k]=h.useState(10),[x,fe]=He(ts,"leaderboard-columns"),[Q,G]=h.useState(!1),I=h.useCallback(async()=>{if(r){m(!0),p(null);try{const s=await ke(r,{period:t}),d=(s==null?void 0:s.items)||(s==null?void 0:s.data)||(s==null?void 0:s.leaderboard)||s;l(ss(d))}catch(s){console.error("Failed to load leaderboard:",s),p(s.message||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÑ‡∏î‡πâ"),l([])}finally{m(!1)}}},[r,t]);h.useEffect(()=>{I()},[I]);const be=async()=>{if(r){y(!0);try{await Ae(r),await I(),V("‡∏ã‡∏¥‡∏á‡∏Å‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à")}catch(s){console.error("Failed to sync leaderboard:",s),F("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ã‡∏¥‡∏á‡∏Å‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÑ‡∏î‡πâ",s)}finally{y(!1)}}},q=async s=>{if(v.length===0){F("‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å");return}G(!0);try{Ze(v,x,s),V(`‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${v.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô ${s.toUpperCase()} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`)}catch(d){console.error("Failed to export:",d),F("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ",d)}finally{G(!1)}},je=async()=>{if(v.length===0){F("‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å");return}await Ke(v,x)?V("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÅ‡∏•‡πâ‡∏ß"):F("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ")},Y=h.useMemo(()=>{if(!u.trim())return a;const s=u.toLowerCase();return a.filter(d=>d.name.toLowerCase().includes(s))},[a,u]),v=h.useMemo(()=>{const s=[...Y];return s.sort((d,f)=>{let N=d[T],P=f[T];return typeof N=="string"&&(N=N.toLowerCase(),P=P.toLowerCase()),N<P?R==="asc"?-1:1:N>P?R==="asc"?1:-1:0}),s},[Y,T,R]),C=Math.ceil(v.length/k),X=h.useMemo(()=>{const s=(j-1)*k,d=s+k;return v.slice(s,d)},[v,j,k]);h.useEffect(()=>{A(1)},[u,T,R]);const Z=h.useMemo(()=>a.slice(0,3),[a]),L=s=>{T===s?H(R==="asc"?"desc":"asc"):(xe(s),H("asc"))},M=s=>T!==s?e.jsx(qe,{className:"w-4 h-4 ml-1 opacity-50"}):R==="asc"?e.jsx(De,{className:"w-4 h-4 ml-1"}):e.jsx(Ue,{className:"w-4 h-4 ml-1"}),ve=(s,d)=>{var f;return e.jsxs(D,{className:d===0?"border-yellow-400 shadow-lg":"",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d===0?e.jsx(Ve,{className:"w-5 h-5 text-yellow-500"}):e.jsx(ze,{className:"w-5 h-5 text-blue-500"}),e.jsxs(se,{className:"text-sm font-medium",children:["‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö ",s.rank]})]}),e.jsx(U,{variant:"outline",className:"text-xs",children:de[d]||`#${s.rank}`})]}),e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs(te,{className:"w-12 h-12",children:[e.jsx(ae,{src:s.pictureUrl,alt:s.name}),e.jsx(re,{children:((f=s.name)==null?void 0:f.charAt(0))||"?"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-base",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["‡πÄ‡∏™‡∏£‡πá‡∏à ",s.completed," ‡∏á‡∏≤‡∏ô ‚Ä¢ ‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤ ",s.onTimeRate,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:s.score.toFixed(1)})]}),s.streak>0&&e.jsxs(U,{variant:"secondary",children:["üî• ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ",s.streak," ‡∏ß‡∏±‡∏ô"]})]})]})]},s.id)};return o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô"}),e.jsx("p",{className:"text-muted-foreground",children:"‡∏î‡∏π‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:"outline",onClick:I,children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä"]}),e.jsxs(me,{children:[e.jsx(he,{asChild:!0,children:e.jsx(g,{variant:"outline",disabled:Q||v.length===0,children:Q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"]})})}),e.jsxs(pe,{align:"end",children:[e.jsxs(E,{onClick:()=>q("csv"),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô CSV"]}),e.jsxs(E,{onClick:()=>q("excel"),children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô Excel"]}),e.jsxs(E,{onClick:()=>q("json"),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô JSON"]}),e.jsx(B,{}),e.jsxs(E,{onClick:je,children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ö‡∏≠‡∏£‡πå‡∏î"]})]})]}),e.jsx(g,{onClick:be,disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏¥‡∏á‡∏Å‡πå..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"‡∏ã‡∏¥‡∏á‡∏Å‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"]})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:es.map(s=>e.jsx(g,{variant:t===s.value?"default":"outline",onClick:()=>n(s.value),children:s.label},s.value))}),c&&e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-md bg-red-50 text-red-700",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"}),e.jsx("p",{className:"text-sm",children:c})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Z.length===0?e.jsx(D,{className:"md:col-span-3",children:e.jsx(_,{className:"py-12 text-center text-muted-foreground",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ"})}):Z.map((s,d)=>ve(s,d))}),e.jsxs(D,{children:[e.jsx(ee,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å"}),e.jsx(Le,{children:"‡∏Ñ‡∏•‡∏¥‡∏Å‡∏´‡∏±‡∏ß‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Ä¢ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{columns:x,onChange:fe,storageKey:"leaderboard-columns"}),e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Fe,{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å...",value:u,onChange:s=>O(s.target.value),className:"pl-10 w-64"})]})]})]})}),e.jsxs(_,{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs uppercase text-muted-foreground border-b",children:[b(x,"rank")&&e.jsx("th",{className:"py-3 pr-4 w-16 cursor-pointer hover:text-foreground transition-colors",onClick:()=>L("rank"),children:e.jsxs("div",{className:"flex items-center",children:["‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö",M("rank")]})}),b(x,"name")&&e.jsx("th",{className:"py-3 pr-4 cursor-pointer hover:text-foreground transition-colors",onClick:()=>L("name"),children:e.jsxs("div",{className:"flex items-center",children:["‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",M("name")]})}),b(x,"score")&&e.jsx("th",{className:"py-3 pr-4 cursor-pointer hover:text-foreground transition-colors",onClick:()=>L("score"),children:e.jsxs("div",{className:"flex items-center",children:["‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°",M("score")]})}),b(x,"completed")&&e.jsx("th",{className:"py-3 pr-4 cursor-pointer hover:text-foreground transition-colors",onClick:()=>L("completed"),children:e.jsxs("div",{className:"flex items-center",children:["‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à",M("completed")]})}),b(x,"onTimeRate")&&e.jsx("th",{className:"py-3 pr-4 cursor-pointer hover:text-foreground transition-colors",onClick:()=>L("onTimeRate"),children:e.jsxs("div",{className:"flex items-center",children:["‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤",M("onTimeRate")]})}),b(x,"stats")&&e.jsx("th",{className:"py-3 pr-4",children:"‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏î‡πà‡∏ô"})]})}),e.jsx("tbody",{children:X.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:x.filter(s=>s.visible).length,className:"py-8 text-center text-muted-foreground",children:u?`‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ "${u}"`:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ"})}):X.map((s,d)=>{var N;const f=(j-1)*k+d;return e.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50 transition-colors",children:[b(x,"rank")&&e.jsx("td",{className:"py-3 pr-4 font-semibold",children:de[f]||`#${s.rank}`}),b(x,"name")&&e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(te,{className:"w-10 h-10",children:[e.jsx(ae,{src:s.pictureUrl,alt:s.name}),e.jsx(re,{children:((N=s.name)==null?void 0:N.charAt(0))||"?"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö ",s.completed," ‡∏á‡∏≤‡∏ô ‚Ä¢ ‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤"," ",s.onTimeRate,"%"]})]})]})}),b(x,"score")&&e.jsx("td",{className:"py-3 pr-4 font-semibold text-blue-600",children:s.score.toFixed(1)}),b(x,"completed")&&e.jsx("td",{className:"py-3 pr-4",children:s.completed}),b(x,"onTimeRate")&&e.jsxs("td",{className:"py-3 pr-4",children:[s.onTimeRate,"%"]}),b(x,"stats")&&e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[s.streak>0&&e.jsxs(U,{variant:"outline",children:["üî• ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ",s.streak," ‡∏ß‡∏±‡∏ô"]}),s.bestStreak>0&&e.jsxs(U,{variant:"outline",children:["üèÖ ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ",s.bestStreak," ‡∏ß‡∏±‡∏ô"]})]})})]},s.id)})})]}),C>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-6 pt-6 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["‡πÅ‡∏™‡∏î‡∏á ",(j-1)*k+1," -"," ",Math.min(j*k,v.length)," ","‡∏à‡∏≤‡∏Å ",v.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>A(s=>Math.max(1,s-1)),disabled:j===1,children:[e.jsx(Ee,{className:"w-4 h-4"}),"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,C)},(s,d)=>{let f;return C<=5||j<=3?f=d+1:j>=C-2?f=C-4+d:f=j-2+d,e.jsx(g,{variant:j===f?"default":"outline",size:"sm",onClick:()=>A(f),className:"w-10",children:f},f)})}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>A(s=>Math.min(C,s+1)),disabled:j===C,children:["‡∏ñ‡∏±‡∏î‡πÑ‡∏õ",e.jsx(Oe,{className:"w-4 h-4"})]})]})]})]})]})]})}export{os as default};
